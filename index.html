<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<title>Bouncing Back? Where NYC subway riders have returned and where they haven't.</title>
	<meta name="description" content="Explore how the NYC Subway usage has changed since the pandemic" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<link rel="stylesheet" href="style.css" />
</head>

<body>

	<main>
		<!-- <section id="intro"> -->
    <div class="section s1 cover">
        <div class="cover_content"> 
			<h1>Bouncing Back? Where NYC Subway Riders Have Returned and Where They Haven't.</h1>
			<p class="cover_dek">
				Scroll down, friends.
			</p>
            <p class="byline">
                By Lynsey Haynes, Ruby, and Jad</a>
              </p>
              <p class="date"><em class="time">28 April 2022</em></p>
        </div>
    </div>
<div class="fixing_group_selector">
	<div class="group_stacked">
		<div id="observablehq-LegendOrange-25697af6"></div>
		<div id="observablehq-viewof-percentilex-25697af6"></div>
	</div>
	<div class="group_stacked">

		<div id="observablehq-legendBlue-25697af6"></div>
		<div id="observablehq-viewof-percentiley-25697af6"></div>
	</div>

</div>

    <div class = "article">
		<section id="scrolly">
			<figure id="sticky">
                <img class="img-step img-step-0" src="sample-image-0.png" width="400" height="400"/>
                <div class="img-step img-step-1" width="100%" height="8000px" id="observablehq-chart-25697af6"></div>
<div class="img-step img-step-2 img-step-4" >
	<div id="observablehq-chart3-25697af6"></div>
</div>

 <!-----------------------------------
 <iframe id="2" oading="eager" class="img-step img-step-2" width="100%" height="751" frameborder="0"
  src="https://observablehq.com/embed/@60c5fdafa656194c/bouncing-back-where-nyc-subway-riders-have-returned-and-whe/3?cells=LegendOrange%2Cviewof+percentilex%2ClegendBlue%2Cviewof+percentiley%2Cchart3"></iframe>

  ---------------------------------------

  <iframe  id="3" oading="eager"class="img-step img-step-3" width="100%" height="784" frameborder="0"
  src="https://observablehq.com/embed/@60c5fdafa656194c/bouncing-back-where-nyc-subway-riders-have-returned-and-whe/3?cells=LegendOrange%2Cviewof+percentilex%2ClegendBlue%2Cviewof+percentiley%2Cheatmap"></iframe>

    --------------------------------------
 <iframe id="4" oading="eager" class="img-step img-step-4" width="100%" height="784" frameborder="0"
  src="https://moshimoshirubydesu.blogspot.com/2022/05/bouncing-back-where-nyc-subway-riders.html"></iframe>

     --------------------------------------->

			</figure>

			<div class="scroll-scenes">
                <div class="step step-0" data-step="0">
                	<br><br><br><br><br><br>
                	<p>In March 2020, the Covid-19 pandemic reached the United States and New York City, which started a widespread lockdown and social isolation. Here we explore how MTA ridership has fallen since the pandemic, where ridership has recovered, and where mostly, it hasn't.

Total MTA Ridership Traffic Per Week, from January 2020 to May 2022</p><hr>
					<p>(left static graph)<br>In 2019, the NYC Subway system averaged 60 million rides per week. </p>

				</div>
				<div class="step step-1" data-step="1">
					<p>At the start of the Covid-19 pandemic, MTA ridership reached a low of 5 million rides per week.</p>
				</div>
				<div class="step step-2" data-step="2">
					<p>Looking closer, some stations lost more riders than others</p>
					<br>
					<h1>Below are drop down menus to help you explore how each individual subway station was affected or compare the top recovering stations with the ones that haven't quite returned to normal.</h2><br>
					<h1>Hover over each line to see the name of the station.</h2>
				</div>
				<div class="step step-3" data-step="3">
					<p>We concluded that overall MTA ridership has not returned to prepandemic levels.</p>
					<h1>What conclusions have you come to? With Just line graphs?</h1>
				</div>
                <div class="step step-4" data-step="4">
					<h1>You might want to consider what you know about the geographic and economic or even tourist factors related to each area.</h1><br><br>
					<h1>Don't worry, we made it easy for you. Scroll below to interact with a heat map and use the same drop down menus below</h1>
				</div>
			</div>
		</section>
    </div>


    <div class="section cover">
        <div class="cover_content"> 
			<h1>NYC Subway Stations</h1>
			<p class="cover_dek">
				Feel free to click, zoom, hover. Don't forget the Drop Down Menu is always below to help aid in your comparisons exploration.
			</p><br>
			<p>
				The transparency of the color as per the color scheme below compares the current amount of ridership at a station to the pre-pandemic amount. So if a station has returned closer to the numbers we saw back in 2019 at that location, the color of the dot will be lighter.
			</p>
	<div  id="observablehq-heatmap-25697af6"></div>
<iframe  src="https://moshimoshirubydesu.blogspot.com/2022/05/bouncing-back-where-nyc-subway-riders.html
"></iframe>
        </div>
    </div>


	</main>

	<!-- <div class='debug'></div> -->
	<script src="https://unpkg.com/d3@5.9.1/dist/d3.min.js"></script>
	<script src="scrollama.min.js"></script>
	<script>
		// using d3 for convenience
		var main = d3.select("main");
		var scrolly = main.select("#scrolly");
		var figure = scrolly.select("figure");
		var article = scrolly.select("article");
		var step = article.selectAll(".step");

        // const progress = document.getElementsByClassName("progress-bar")[0];
        // const scrolly = document.getElementById("scrolly");
        // let scrollyHeight = scrolly.clientHeight;
        // let scrollyOffset = window.pageYOffset + scrolly.getBoundingClientRect().top;

		// initialize the scrollama
		var scroller = scrollama();

		// generic window resize listener event
		function handleResize() {
			// 1. update height of step elements
			var stepH = Math.floor(window.innerHeight );
			step.style("height", stepH + "px");

			var figureHeight = window.innerHeight ;
			var figureMarginTop = (window.innerHeight - figureHeight) /2;

			figure
				.style("height", figureHeight + "px")
				.style("top", figureMarginTop + "px");

			// 3. tell scrollama to update new element dimensions
			scroller.resize();
		}

        // fade image in
        function show_image(source) {
            var img = body.append("img").attr("src", source).style("opacity", 0)
            img.transition().duration(5000).ease(d3.easeLinear).style("opacity", 1)
          }

		// scrollama event handlers
		function handleStepEnter(response) {
			console.log(response);

			// update graphic based on step
            if (response.index == 0) {
                figure.select("p").append("sample-image");
            } else {
			    figure.select("p").text(response.index + 1);
            }

            response.element.classList.add("is-active");
            document
                .getElementsByClassName(`img-step-${response.index}`)[0]
                .classList.add("is-active");
		}

        function handleStepExit(response) {
            console.log(response.element.classList);
        
            response.element.classList.remove("is-active");
            if (response.direction == "up" && response.index == 0) {
            } else if (response.direction == "down" && response.index == 21) {
            } else {
                document
                .getElementsByClassName(`img-step-${response.index}`)[0]
                .classList.remove("is-active");
            }
        }

		function setupStickyfill() {
			d3.selectAll(".sticky").each(function () {
				Stickyfill.add(this);
			});
		}

		function init() {
			setupStickyfill();

			// 1. force a resize on load to ensure proper dimensions are sent to scrollama
			handleResize();

			// 2. setup the scroller passing options
			// 		this will also initialize trigger observations
			// 3. bind scrollama event handlers (this can be chained like below)
			scroller
				.setup({
					//step: "#scrolly article .step",
					//offset: 0.33,
					//debug: false
                    step: "#scrolly .scroll-scenes .step",
                    offset: 0.5,
                    debug: false
				})
				.onStepEnter(handleStepEnter)
                .onStepExit(handleStepExit);
		}

		// kick things off
		init();
	</script>




<script type="module">
import {Runtime, Inspector} from "https://cdn.jsdelivr.net/npm/@observablehq/runtime@4/dist/runtime.js";
import define from "https://api.observablehq.com/@60c5fdafa656194c/bouncing-back-where-nyc-subway-riders-have-returned-and-whe/3.js?v=3";
new Runtime().module(define, name => {
  if (name === "chart3") return new Inspector(document.querySelector("#observablehq-chart3-25697af6"));
  if (name === "chart") return new Inspector(document.querySelector("#observablehq-chart-25697af6"));
  if (name === "LegendOrange") return new Inspector(document.querySelector("#observablehq-LegendOrange-25697af6"));
  if (name === "viewof percentilex") return new Inspector(document.querySelector("#observablehq-viewof-percentilex-25697af6"));



    if (name === "viewof percentilex") return new Inspector(document.querySelector("#observablehq-viewof-percentilex-25697af6-ruby"));




  if (name === "legendBlue") return new Inspector(document.querySelector("#observablehq-legendBlue-25697af6"));
  if (name === "viewof percentiley") return new Inspector(document.querySelector("#observablehq-viewof-percentiley-25697af6"));
  if (name === "heatmap") return new Inspector(document.querySelector("#observablehq-heatmap-25697af6"));
  return ["focus","diffsfilteredx","graph_datax","diffsfilteredy","graph_datay"].includes(name);
});
</script>


</body>

</html>